<section>
    <h2>
        Introduction to<br>
        GRASS GIS
    </h2>
    <p style="margin-top: 0.5em">
        Helena Mitasova
        <br>
        and Vaclav Petras</p>
    <p class="title-foot">
        GIS/MEA582 Geospatial Modeling and Analysis
        <a href="http://www.ncsu.edu/" title="North Carolina State University">NCSU</a>
    </p>
</section>

<section>
<h3>Learning Objectives</h3>
<p>
This lecture is a brief introduction to GRASS GIS software
and overview of its features in the context of this course and
open source software in general.
</p>
<ul>
    <li>
</ul>
</section>


<section>
<h3>Open Source and Licensing</h3>
<ul>
<li>According to Stallman (2002),
    there are four freedoms that as a <em>user</em> you should have:
    <ul>
        <li>the freedom to use the software for any purpose,
        <li>the freedom to change the software to suit your needs,
        <li>the freedom to share the software, and
        <li>the freedom to share the changes you make.
    </ul>
</ul>
<figure>
<img src="img/gpl_logo.svg" style="width: 30%">
<figcaption><small>Logo of GNU GPL license, version 3</small></figcaption>
</figure>
<p>
<small>
Stallman, R. M. (2002). Free software, free society: selected essays. Ed. by J. Gay. 1st. ed. OCLC:
253840339. Boston, Mass: Free Software Foundation. 220 pp. ISBN 978-1-882114-98-6.
</small>
</section>


<section>
<h3>Free, Libre, and Open Source</h3>

<ul>
<li>
    free software (FS),
    open source software (OSS),
    free and open source software (FOSS),
    free, libre and open source software (FLOSS)
<li>the term <em>open source</em> is often used for simplicity
    <ul>
        <li>often used by developers as it refers to a development model
    </ul>
<li>the term <em>FOSS</em> is often used in geospatial community
    <ul>
        <li><em>free</em> refers to user's freedom
        <li><em>open source</em> refers to open development model
        <li><em>FOSS4G</em> (free and open source software for geospatial)
    </ul>
</ul>
</section>


<section>
<h3>Commercial and FOSS</h3>

<ul>
<li>FOSS can be used commercially
<li>FOSS can be commercial but not proprietary
<li>FOSS can be used to build closed platforms
<li>Famous FOSS examples (non-geospatial):
<ul>
    <li>Red Hat Enterprise Linux/CentOS
    <li>Android/Android Open Source Project
    <li>Chrome/Chromium, Firefox
    <li>WordPress, Drupal
    <li>Moodle
    <li>Python, R
    <li>
        <a href="https://opensource.apple.com/">Apple</a>,
        <a href="https://opensource.google.com/">Google</a>,
        <a href="https://code.facebook.com/projects/">Facebook</a>,
        <a href="https://www.linux.com/news/featured-blogs/200-libby-clark/787161-how-amazon-web-services-uses-linux-and-open-source">Amazon</a>,
        <a href="https://netflix.github.io/">Netflix</a>
</ul>
</ul>

</section>


<section>
<h3>FOSS Ecosystem: Example of a Scientific Desktop Setup</h3>
<dl>
<dt>QGIS, GRASS GIS</dt>
<dd>
GIS, remote sensing, cartography
</dd>
<dt>R, Octave, Python</dt>
<dd>
statistics, linear algebra, scripting, automation
</dd>
<dt>SQLite, PostgreSQL with PostGIS, LibreOffice</dt>
<dd>
database, tabular data
</dd>
<dt>Inkscape, Gimp, ImageMagic</dt>
<dd>
vector graphics, raster graphics
</dd>
</dl>
<ul class="small">
    <li>Portability: works on Mac, Linux, Windows
    <li>Interoperability: programs designed to work with others
</ul>
</section>


<section>
<h3>FOSS Ecosystem: Example of a Service Setup</h3>

<dl>
<dt>GRASS GIS, R, SAGA GIS, GDAL</dt>
<dd>
backend processing
</dd>
<dt>OpenLayers or Leaflet, Django or Flask</dt>
<dd>
front end
</dd>
<dt>PostgreSQL with PostGIS</dt>
<dd>
database (spatial and non-spatial data storage)
<!--<span class="small">(native connection between GRASS GIS and PostGIS)</span>-->
</dd>
<dt>ZOO-Project, PyWPS, GeoServer, or QGIS Server</dt>
<dd>
processing server and spatial data publishing server
<!--<span class="small">(OGC WPS, native support for GRASS GIS)</span>-->
<!--<span class="small">(MapServer can read directly from GRASS GIS database)</span>-->
</dd>
</dl>

<ul class="small">
    <li>Flexibility: standards and open formats allows to switch different components
    <li>Scalability: can be copied to more machines at no cost
</ul>
</section>

<section>
<h3>GRASS GIS</h3>
<p>
GRASS GIS (Geographic Resources Analysis Support System) is a Free and Open Source Software suite 
for geospatial data management and analysis, image processing, spatial modeling, and visualization.
<p>
<a href="https://grass.osgeo.org/">grass.osgeo.org</a>
<p>
<a href="https://github.com/OSGeo/grass/">Source code in github</a>
</section>

<section>
<h3>GRASS GIS</h3>
<ul>
    <li>
        Timeline:
        <ul>
        <li>1983 started at US Army CERL
            <span class="small">
                as land management system
            </span>
        <li>evolved into general purpose GIS
        <li>1999 GNU GPL, international team of developers
        <li>2008 OSGeo Project
        <li>38 years of GRASS GIS development in 2021
        <li>check out <a href="https://trac.osgeo.org/grass/timeline">last change</a>
            <span class="small">(probably just few hours ago)</span>
        <li>last stable release October, 2021 <span class="small">[last checked December 2021]</span>
        </ul>
</ul>
<img src="img/grass_logo_development.png" class="stretch">
</section>


<section>
<h3>Historical Video</h3>
<p class="small">
    Historical promotional video from 1987 narrated by William Shatner
</p>
<iframe width="560" height="315" scrolling="no" src="https://av.tib.eu/player/12963" frameborder="0" allowfullscreen></iframe>
<p class="small">
    watching 1 minute is sufficient to get the idea,
    optionally you can watch the whole 15 minutes
    and see metadata and transcript at
    <a href="https://doi.org/10.5446/12963">doi.org/10.5446/12963</a>
</p>
</section>


<section>
<h3>Processing Capabilities Overview</h3>
    <dl style="font-size: 70%;">
        <dt>raster and 3D raster</dt>
        <dd>
            map algebra, DEM, interpolation, flow, neighborhood, solar, cost surfaces, ...
        </dd>
        <dt>imagery (remote sensing)</dt>
        <dd>
            rectification, multispectral, classification, segmentation, PCA, FFT, ML, ...
        </dd>
        <dt>vector and database</dt>
        <dd>
            buffers, overlays, networks, topology, attribute management, SQL, ...
        </dd>
        <dt>spatio-temporal data (time series)</dt>
        <dd>
            sampling, statistics, aggregation, temporal topology, algebra, ...
        </dd>
    </dl>
<img src="img/grass_modeler_skyview.png" class="stretch">
</section>


<section>
<h3>General Capabilities Overview</h3>
    <dl style="font-size: 70%;">
        <dt>visualization</dt>
        <dd>
            2D display, 3D visualization, temporal visualization, PNG, PS and PDF maps, ...
        </dd>
        <dt>interoperability</dt>
        <dd>
            import from and export to different formats, WMS, ...
        </dd>
        <dt>extensibility</dt>
        <dd>
            scriptable (e.g. Python), custom tools (typically Python or C), ...
        </dd>
    </dl>
<img src="img/drone_3d.png" class="stretch">
<br><small>Visualization of a planned drone flight over digital surface model with ortho</small>
</section>


<section>
<h3>Research Use</h3>
<ul>
<li>Used as a research platform and code repository
<li>Example: Solar radiation model <strong>r.sun</strong>
    <ul>
        <li>available since 1993
        <li>major changes in 1996, 1999, 2002, 2003, 2006, 2008, 2017
        <li>parallelized version in 7.4
        <li><small><a href="https://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.19.9831&rep=rep1&type=pdf">Hofierka, J., Suri, M. (2002): The solar radiation model for Open source GIS: implementation and applications. International GRASS users conference in Trento, Italy, September 2002.</a></small>
    </ul>
</ul>
<br>
<img src="img/summer_solstice_centennial.gif" class="stretch">
<p><small>
Example application: summer solstice solar radiation dynamics on lidar DEM (Centennial Campus)
</small></p>
</section>


<section>
<h3>Software Description</h3>
<ul>
    <li>portable:
        <ul>
            <li>many operating systems: MS Windows, Mac OS, Linux, ...
            <li>(32bit) and 64bit versions
            <li>high-end desktops, low-end laptops,
                Raspberry Pi,
                High-Performance Computing clusters, ...
        </ul>
    <li>single integrated software
    <li>functionality implemented as 500+ modules
    <li>written in C and Python
</ul>
<img src="img/grass_hexagons_3d_white_outlier.png" class="stretch">
</section>


<section>
<h3>Naming Convention for Modules</h3>
<table style="font-size: smaller;"><tbody>
    <tr>
        <th>Prefix</th>
        <th>Functionality</th>
        <th>Example</th>
    </tr>
    <tr>
        <td>r.</td>
        <td>raster processing</td>
        <td>r.mapcalc: raster map algebra</td>
    </tr>
    <tr>
        <td>v.</td>
        <td>vector processing</td>
        <td>v.surf.rst: interpolation from points</td>
    </tr>
    <tr>
        <td>g.</td>
        <td>general management</td>
        <td>g.remove: removes maps</td>
    </tr>
    <tr>
        <td>d.</td>
        <td>display and rendering</td>
        <td>d.rast: display raster map</td>
    </tr>
    <tr>
        <td>i.</td>
        <td>imagery processing</td>
        <td>i.segment: image segmentation</td>
    </tr>
        <tr>
        <td>r3.</td>
        <td>3D raster processing</td>
        <td>r3.stats: 3D raster statistics</td>
    </tr>
    <tr>
        <td>t.</td>
        <td>temporal data processing</td>
        <td>t.rast.aggregate: temporal aggregation</td>
    </tr>
</tbody></table>
<!--
<br> <img src="img/grass_cli.png" class="stretch">
-->
</section>


<section>
<h3>User Interfaces</h3>
<ul>
<li>Modules can be accessed using:
    <ul>
        <li>Graphical User Interface (GUI)
        <li>Command Line Interface (CLI)
        <li>Python
    </ul>
</ul>
<br>
<img src="img/grass_count_and_modules.png" class="stretch">
</section>


<section>
<h3>Graphical User Interface</h3>
<ul>
<li>The interface for desktop
</ul>
<br>
<img src="img/grass_gui.png" class="stretch">
<small>GUI for GRASS GIS 7, redesign coming with GRASS GIS 8.2</small>
</section>


<section>
<h3>GUI for modules</h3>
<ul>
    <li>All modules have standardized, unified interface layout.
</ul>
<br>
<img src="img/r_neighbors_dialog.png" class="stretch">
<p><small>
Standard dialog (form) for the r.neighbors module
</small></p>
</section>


<section>
<h3>Command Line</h3>
<ul>
<li>The baseline interface for efficiency and reproducibility
<li>Available in GUI as Console with autocomplete functions
</ul>
<pre>r.fill.dir input=elev output=fill direction=dir
</pre>
<img src="img/grass_cli.png" class="stretch">
</section>


<section>
<h3>Python</h3>
<ul>
    <li>grass package part of GRASS GIS
    <li>access to modules, but also to internal C functions
    <li>integrated Python editor
    <li>integrates with Jupyter Notebooks
</ul>
<pre><code>import grass.script as gs
gs.run_command('r.fill.dir', input='elev',
               output='fill', direction='dir')
</code></pre>
<img src="img/pyedit.png" class="stretch">
</section>


<section>
<h3>Duality between GUI and commands</h3>
<div class="left">
    <img src="img/r_in_lidar_dialog.png" style="width: 100%;">
</div>
<div class="left">
    <small>Command line (Bash):</small>
    <br>
    <img src="img/r_in_lidar_command_in_bash.png" style="width: 100%;">
    <small>Python:</small>
    <br>
    <img src="img/r_in_lidar_command_in_python.png" style="width: 100%;">
</div>
<p><small>
Examples in the documentation and class instructions are usually
provided as commands which can be used to fill in the GUI, write Python
code, or run them directly.
</small></p>
</section>


<section>
<h3>3rd Party Interfaces</h3>
<ul>
<li>QGIS <small class="small">(Processing Plugin and GRASS Plugin)</small>
<li>R <small class="small">(rgrass package)</small>
<li>...
</ul>
<br>
<img src="img/qgis_processing.png" class="stretch">
</section>


<section>
<h3>3rd Party Interfaces</h3>
<ul>
<li>Tangible Landscape
    <ul>
        <li>tangible user interface to GRASS GIS and Blender
        <li>by NC State University, Center for Geospatial Analytics
    </ul>
</ul>
<iframe width="560" height="315" src="https://www.youtube.com/embed/Cd3cCQTGer4" frameborder="0"  allowfullscreen></iframe>
<!--
<iframe data-autoplay width="700" height="350" src="https://www.youtube.com/embed/Uje8ORyhBaQ?rel=0&amp;showinfo=0&amp;loop=1&amp;playlist=Uje8ORyhBaQ" frameborder="0" allowfullscreen></iframe>
-->
<p><small>
Modules running: v.surf.rst, r.contour, r.fill.dir, r.sim.water
<br>see also <a href="https://link.springer.com/book/10.1007%2F978-3-319-89303-7">Petrasova et al., 2018, Tangible Modeling with Open Source GIS, 2nd edition, Springea</a>
</small></p>
</section>


<section>
<h3>Spatial Database</h3>
<img src="img/grass_data_tab.svg" class="stretch"
     alt="Example of GRASS GIS database structure into locations (based on SRS) and further to mapsets (for organization)">
</section>


<section>
<h3>Starting GRASS GIS 7</h3>
<ul>
<li>Selecting database, location, and mapset
</ul>
<br>
<img src="img/grass_startup.png" class="stretch">
<p><code>grass -c EPSG:3358 -e ~/grassdata/nc_spm/</code>
<p><small>GRASS GIS start-up is redesigned for GRASS GIS 8 with more intuitive start</small>
</section>


<section>
<h3>Computational Region</h3>
<ul>
    <li>extent and resolution for raster computations
</ul>
<br>
<img src="img/grass_computational_region.png" class="stretch">
</section>


<section>
<h3>Documentation: Public Author &amp; Accessible Code</h3>
<img src="img/grass_module_author_source.png" class="stretch">
</section>


<section>
<h3>Documentation: Link to Research Papers</h3>
<img src="img/grass_module_references.png" class="stretch">
</section>


<section>
<h3>Asking Questions</h3>
<ul>
    <li>Mailing list discussions (archived since 1991)
    <li>GIS StackExchange, ...
    <li>Commercial support
<ul>
<img src="img/grass_user_mailing_list.png" class="stretch">
<p>
</section>


<section>
<h3>Addons Repository</h3>
<ul>
    <li>user contributed modules, plugins, tools, functions
    <li>distributed to users
    <li>including compiled C and C++ for MS Windows
    <li>automatically generated GUI
        <span class="small">for Python and C/C++</span>
</ul>
<img src="img/grass_addons.png" class="stretch">
</section>

<!--
<section>
<h3>Peer-reviewed Implementation</h3>
<ul>
    <li>Example:
        <ul>
            <li>user tested the module
            <li>discovered error in equation in code
        </ul>
</ul>
<img src="img/grass_bug_in_equation.png" class="stretch">
</section>
-->

<section>
<h3>Try GRASS GIS with Jupyter Notebooks</h3>
GRASS GIS workshops and tutorials implemented as Jupyter Notebooks in Binder
<ul>
    <li><a href="https://mybinder.org/v2/gh/ncsu-geoforall-lab/grass-gis-workshop-foss4g-2021/main?urlpath=lab%2Ftree%2Fworkshop_part_1.ipynb">
GRASS GIS: From Beginner to Power User</a>
    <li><a href="https://mybinder.org/v2/gh/OSGeo/grass/c173461?urlpath=lab%2Ftree%2Fdoc%2Fnotebooks%2Fgrass_jupyter.ipynb">
GSoC project: Improved intergration of GRASS GIS and Jupyter</a>
</ul>
</section>


<section>
<h3>Summary</h3>
<ul>
    <li>Licensing: No "purchasing of licenses" needed for users
    <li>Support: Community and commercial
        <ul>
            <li>Students: Start with course message board now; try mailing list or GIS StackExchange later on
        </ul>
    <li>Several user interfaces
        <ul>
            <li>Class instructions are using GUI and command line
            <li>Python and Jupyter are recommended for the projects
        </ul>
    <li>Data in database, locations and mapsets
    <li>Raster operations in a specified computational region
</ul>
<br>
<img src="img/grass_logo.png" class="stretch">
</section>

<div class="parent-page">
    <!-- &#x1f3e0; -->
    <a href="http://ncsu-geoforall-lab.github.io/geospatial-modeling-course/" title="Go to the course page">&#8962;</a>
</div>
